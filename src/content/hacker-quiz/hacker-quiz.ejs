<style>
  .spinner-container {
    max-width: 600px;
    margin: 0 auto;
    background-color: rgb(50, 50, 50);
    height: 200px;
    overflow: hidden;
    border-radius: 16px;
    position: relative;
  }

  .spinner-container::before,
  .spinner-container::after {
    content: '';
    position: absolute;
    left: 0;
    width: 100%;
    height: 50px;
    z-index: 2;
    pointer-events: none;
  }

  .spinner-container::before {
    top: 0;
    background: linear-gradient(to bottom, #222, transparent);
  }

  .spinner-container::after {
    bottom: 0;
    background: linear-gradient(to top, #222, transparent);
  }

  /* Der Wrapper, der sich bewegt */
  .scroll-wrapper {
  }

  .topic {
    color: white;
    text-align: center;
    padding: 9px;
    border-bottom: 1px solid #696969;
    font-size: 30px;
    white-space: nowrap;
    user-select: none;
  }
</style>

<div class="spinner-container">
  <div class="scroll-wrapper"></div>
</div>

<div style="text-align: center; margin-top: 32px">
  <button class="btn btn-interaction btn-lg" id="spinner-start">Start</button>
</div>

<script>
  // hacking related questions, options are only words / very short, correct answer is always first
  const topics = [
    {
      id: 1,
      de: {
        topic: 'Netzwerk',
        questions: [
          {
            question:
              'Welches Protokoll wird verwendet, um Webseiten zu laden?',
            options: ['HTTP', 'FTP', 'SMTP', 'DNS'],
          },
          {
            question:
              'Welches Gerät verbindet verschiedene Netzwerke miteinander?',
            options: ['Router', 'Switch', 'Modem', 'Firewall'],
          },
          {
            question: 'Welche IP-Version ist die aktuellste?',
            options: ['IPv6', 'IPv4', 'IPX', 'IPV2'],
          },
        ],
      },
    },
    {
      id: 2,
      de: {
        topic: 'Passwörter',
        questions: [
          {
            question: 'Was bedeutet MFA? ',
            options: [
              'Multi-Faktor-Authentifizierung',
              'Mein-Foto-Album',
              'Mail-Forwarding-Account',
              'Mehrfach-File-Archiv',
            ],
          },
          {
            question: 'Welche Methode ist am sichersten? ',
            options: ['Passphrase', 'Name+Geburtstag', '123456', 'Passwort'],
          },
          {
            question: 'Was ist ein Passwort-Manager? ',
            options: [
              'Tool zum Speichern/Generieren',
              'Browser-Cache',
              'VPN',
              'Firewall',
            ],
          },
        ],
      },
    },
    {
      id: 3,
      de: {
        topic: 'Web-Sicherheit',
        questions: [
          {
            question: 'Welche Schwachstelle betrifft ungefilterte Eingaben? ',
            options: ['XSS', 'DDoS', 'DNS', 'NTP'],
          },
          {
            question: 'Wofür steht CSRF? ',
            options: [
              'Cross-Site Request Forgery',
              'Client-Side Render Flow',
              'Cookie Session Reset Flag',
              'Cache State Refresh Function',
            ],
          },
          {
            question: 'Welches Flag schützt Cookies vor JS-Zugriff? ',
            options: ['HttpOnly', 'Readable', 'Public', 'Inline'],
          },
        ],
      },
    },
  ]

  // create a div for every topic (de), only topic, very simple
  const wrapper = document.querySelector('.scroll-wrapper')
  for (const x of [0, 1]) {
    topics.forEach((topic) => {
      const topicDiv = document.createElement('div')
      topicDiv.classList.add('topic')
      topicDiv.innerHTML = `<div>${topic.de.topic}</div>`
      wrapper.appendChild(topicDiv)
    })
  }

  const WRAPPER_HEIGHT = wrapper.offsetHeight / 2
  const ELEMENT_HEIGHT = WRAPPER_HEIGHT / topics.length

  let pos = 0
  let speed = 15 // pixels per second
  let lastTime = null
  let mode = 'KEEP' // 'SLOWDOWN', 'ACCEL'

  function loop() {
    const now = performance.now()
    const delta = now - lastTime
    pos += speed * (delta / 1000)
    if (pos >= WRAPPER_HEIGHT) {
      pos -= WRAPPER_HEIGHT
    }
    wrapper.style.transform = `translateY(-${pos}px)`

    // handle speed changes
    if (mode === 'ACCEL') {
      speed += 800 * (delta / 1000)
    } else if (mode === 'SLOWDOWN') {
      speed *= 0.95
      if (speed <= 3) {
        speed = 0
        mode = 'KEEP'
      }
    }

    lastTime = now
    requestAnimationFrame(loop)
  }

  document.getElementById('spinner-start').addEventListener('click', () => {
    speed = 500
    setTimeout(() => {
      speed = 1000
    }, 300)
    setTimeout(() => {
      mode = 'SLOWDOWN'
    }, 2000)
  })

  lastTime = performance.now()
  loop()
</script>
