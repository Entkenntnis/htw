<% if (App.config.languages.length > 1) { %>
  <div class="lang-wrap">
    <nav class="lang-picker" aria-label="Language picker">
      <span class="lang-label"><%= t('home.language') %>:</span>
      <div class="lang-group" role="group" aria-label="Language options">
        <% for (let i = 0; i < App.config.languages.length; i++) { %>
          <% const lng = App.config.languages[i]; %>
          <button type="button"
                  class="lang-pill <%= lng == locale ? 'is-active' : '' %>"
                  data-lng="<%= lng %>">
            <%= lng.toUpperCase() %>
          </button>
        <% } %>
      </div>
    </nav>
  </div>

  <script src="/js.cookie.min.js"></script>
  <script>
    (function(){
      const key = 'htw_language_preference'
      document.querySelectorAll('.lang-pill').forEach(function(btn){
        btn.addEventListener('click', function(){
          const lng = btn.getAttribute('data-lng')
          const previousLng = Cookies.get(key)
          if (lng !== previousLng) {
            Cookies.set(key, lng, {sameSite: 'lax'})
            window.location.href = lng === 'de' ? '/de' : '/en'
          }
        })
      })
    })();
  </script>
<% } %>
